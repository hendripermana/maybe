<%= link_to budget_budget_category_path(@budget_category.budget, @budget_category), class: card_classes, data: { turbo_frame: "drawer" } do %>
  <div class="flex items-center justify-between">
    <div class="flex items-center gap-3">
      <% if @budget_category.initialized? %>
        <div class="w-10 h-10 rounded-full flex items-center justify-center transition-transform duration-300 hover:scale-105" style="<%= icon_bg_style %>">
          <% if has_icon? %>
            <span style="<%= icon_color_style %>">
              <%= icon(@budget_category.category.lucide_icon, size: "sm", color: "current") %>
            </span>
          <% else %>
            <%= render FilledIconComponent.new(
              variant: :text,
              hex_color: @budget_category.category.color,
              text: @budget_category.category.name,
              size: "sm",
              rounded: true
            ) %>
          <% end %>
        </div>
      <% else %>
        <div class="w-10 h-10 rounded-full flex items-center justify-center transition-transform duration-300 hover:scale-105" style="<%= icon_bg_style %>">
          <% if has_icon? %>
            <span style="<%= icon_color_style %>">
              <%= icon(@budget_category.category.lucide_icon, size: "sm", color: "current") %>
            </span>
          <% else %>
            <%= render FilledIconComponent.new(
              variant: :text,
              hex_color: @budget_category.category.color,
              text: @budget_category.category.name,
              size: "sm",
              rounded: true
            ) %>
          <% end %>
        </div>
      <% end %>

      <div>
        <h3 class="text-sm font-medium text-foreground"><%= @budget_category.category.name %></h3>
        <p class="text-sm font-medium <%= status_classes %>"><%= status_text %></p>
      </div>
    </div>

    <div class="text-right">
      <p class="text-sm font-medium text-foreground"><%= format_money(@budget_category.actual_spending_money) %></p>
      <% if @budget_category.initialized? %>
        <p class="text-xs text-muted-foreground">from <%= format_money(@budget_category.budgeted_spending_money) %></p>
      <% end %>
    </div>
  </div>

  <% if @budget_category.initialized? && @budget_category.budgeted_spending > 0 %>
    <%= render UI::ProgressBarComponent.new(
      value: @budget_category.actual_spending,
      max: @budget_category.budgeted_spending,
      variant: progress_variant,
      size: :sm,
      animated: true
    ) %>
  <% end %>
<% end %>